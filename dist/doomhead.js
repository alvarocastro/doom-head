'use strict';var DoomHead=function(){var a=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'doomhead',c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},d=c.health,e=d===void 0?100:d,f=c.size,g=f===void 0?32:f,h=c.antialias,i=c.refreshRate,j=i===void 0?700:i,k=c.spriteSheetSrc,l=k===void 0?'https://alvarocastro.github.io/doom-head/doomguy.png':k,m=document.getElementById(b),n=document.createElement('canvas'),o=void 0,p=void 0;this.size=g,this.zoom=g/32,this.canvas=n,n.width=g,n.height=g,m.appendChild(n),o=n.getContext('2d'),o.imageSmoothingEnabled=h!==void 0&&h,this.context=o,p=new Image,p.src=l,p.onload=function(){a.tick()},this.sprites=p,this.spriteWidth=24,this.health=e,this.refreshRate=j};DoomHead.prototype={r:function r(a){return Math.floor(Math.random()*a)},calcStatus:function calcStatus(a){if(100<a)return 0;return 0>=a?6:100===a?1:Math.ceil(5-a/20)},calcFrames:function calcFrames(a){var b=1+3*(a-1);return 0===a?[0,0,0]:6===a?[16,16,16]:[b,b+1,b+2]},calcState:function calcState(){return this.r(2)?0:1+this.r(2)},setSprite:function setSprite(a){this.context.fillRect(0,0,this.size,this.size),this.context.drawImage(this.sprites,this.spriteWidth*a,0,24,31,4*this.zoom,1*this.zoom,24*this.zoom,31*this.zoom)},tick:function tick(){var a=this,b=this.calcState(),c=this.calcStatus(this.health),d=this.calcFrames(c);this.setSprite(d[b]),setTimeout(function(){a.tick()},this.refreshRate)}};